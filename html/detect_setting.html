<html>
    <head>
        <title>{{web_name}} 预测基本配置</title>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="file/settings.css?new=true">
    </head>
    <body>
        <form
            action="/save_detectSettings"
            method="post"
            enctype="multiple/form-data"
            class="elegant-aero"
        >
        <h3>{{web_name}} 预测基本配置</h3>
        {{gpu_msg_string|safe}}<br />
        <div>
            预测名称(同训练名称):<br />
            <input name="name" type="text" value="{{settings_dir}}" readonly required><br />
        </div>
        <div>
            预测数据来源(若为本机摄像头则填数字“0”，若为图片文件夹则其路径，若为图片则不填):<br />
            <input name="data_dir" type="text" value="{{data_root}}" readonly required><br />
        </div>
        <div class="selectline">
            <div class="select">
                预测数据类型:<br />
                <select name="source_type" required>{{source_type_string|safe}}</select><br />
            </div>
            <div class="select">
                是否保存预测图片至服务器:<br />
                <select name="save_image" required>{{save_image_string|safe}}</select><br />
            </div>
        </div>
        <div class="selectline">
            <div class="select">
                是否为trt文件:<br />
                <select name="is_trt_file" required>{{is_trt_file_string|safe}}</select><br />
            </div>
            <div class="select">
                是否生成第一张图片后暂停:<br />
                <select name="start_with_pause" required>{{start_with_pause_string|safe}}</select><br />
            </div>
        </div>
        <div class="selectline">
            <div class="select" style="width: 23.16%;">
                是否展示图片:<br />
                <select name = "show_image" required>
                    {{show_image_string|safe}}
                </select><br />
            </div>
            <div class="select" style="width: 23.16%;">
                预测模型大小:<br />
                <select name = "model_size" required>
                    {{model_size_string|safe}}
                </select><br />
            </div>
            <div class="select" style="width: 23.16%;">
                使用gpu个数:<br />
                <select name = "gpu_num" required>{{gpu_string|safe}}</select><br />
            </div>
        </div>
        <div class="numberline">
            <div class="number">
                预测置信度阈值(conf_thres):<br />
                <input type="number" name="conf_thres" value="{{conf_thres}}" required/><br />
            </div>
            <div class="number">
                非极大值抑制阈值(nms_thres):<br />
                <input type="number" name="nms_thres" value="{{nms_thres}}" required/><br />
            </div>
            <div class="number">
                输入的图像尺寸:<br />
                <input type="number" name="input_size" value="{{input_size}}" required/><br />
            </div>
        </div>
        <div>
            预测模型文件:<br />
            <input name="pretrained_weight_file" placeholder="必填，大小一定要对应(backbone file:./weight/XX_backbone.pth, ckpt file:./settings/{{settings_dir}}/output/last.pth)" type="text" value="{{pretrained_file}}"><br />
        </div>
        <div>
            使用的GPU编号:<br />
            <input type="text" placeholder="参考可用GPU编号，多填则用分号隔开，不填则按编号顺序使用GPU（示例：1;3）" name="gpu_choose" value="{{gpu_choose}}"/><br />
        </div>
            <input type="checkbox"{{check0}} name="fp16">使用混合精度预测(fp16)<br />
            <input type="checkbox"{{check1}} name="auto_choose_device">自动选择GPU或CPU预测<br />

            <br /><textarea name="classes" placeholder="预测类别名称（与训练所用类别一致），每行一个">{{class_string}}</textarea><br />

            <br />
            <input type="reset" class="button" value="重置"> &nbsp;
            <input type="submit" class="button" value="提交"><br />
            <input type="hidden" name="token" value="null">

        </form>
    </body>
</html>